{% extends "base.html" %}

{% block title %}{{ novel.title }} - åˆ›ä½œæµç¨‹{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ“– {{ novel.title }}</h2>
    <p style="color: #7f8c8d; margin-bottom: 20px;">ä½œè€…ï¼š{{ novel.author }} | ç±»å‹ï¼š{{ novel.genre or 'æœªè®¾ç½®' }}</p>

    <!-- è¿›åº¦æ¡ -->
    <div style="margin-bottom: 30px;">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; background: #ecf0f1; border-radius: 4px;">
            <div class="step {% if novel.current_step >= 1 %}active{% endif %}">æ­¥éª¤1: æ€è·¯</div>
            <div class="step {% if novel.current_step >= 2 %}active{% endif %}">æ­¥éª¤2: ä¸–ç•Œè§‚</div>
            <div class="step {% if novel.current_step >= 3 %}active{% endif %}">æ­¥éª¤3: å¤§çº²</div>
            <div class="step {% if novel.current_step >= 4 %}active{% endif %}">æ­¥éª¤4: ç»†çº²</div>
            <div class="step {% if novel.current_step >= 5 %}active{% endif %}">æ­¥éª¤5: åˆ›ä½œ</div>
            <div class="step {% if novel.current_step >= 6 %}active{% endif %}">æ­¥éª¤6: å®Œæˆ</div>
        </div>
    </div>

    <!-- æ­¥éª¤1ï¼šåˆ›ä½œæ€è·¯ -->
    <div class="card">
        <h3>æ­¥éª¤1ï¼šåˆ›ä½œæ€è·¯</h3>
        <form hx-post="/workflow/{{ novel.id }}/step1" hx-target="#step1-result">
            <textarea name="initial_idea" placeholder="è¾“å…¥ä½ çš„åˆå§‹æƒ³æ³•ï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ä½¿ç”¨å°è¯´æè¿°ï¼‰">{{ novel.description }}</textarea>
            <button type="submit" class="btn">ç”Ÿæˆåˆ›ä½œæ€è·¯</button>
        </form>
        <div id="step1-result" style="margin-top: 20px;"></div>
    </div>

    <!-- æ­¥éª¤2ï¼šä¸–ç•Œè§‚ -->
    <div class="card">
        <h3>æ­¥éª¤2ï¼šä¸–ç•Œè§‚å’Œè§’è‰²</h3>
        <button hx-post="/workflow/{{ novel.id }}/step2"
                hx-target="#step2-result"
                class="btn">ç”Ÿæˆä¸–ç•Œè§‚</button>
        <div id="step2-result" style="margin-top: 20px;"></div>
    </div>

    <!-- æ­¥éª¤3ï¼šå¤§çº² -->
    <div class="card">
        <h3>æ­¥éª¤3ï¼šç”Ÿæˆå¤§çº²</h3>
        <button hx-post="/workflow/{{ novel.id }}/step3"
                hx-target="#step3-result"
                class="btn">ç”Ÿæˆå¤§çº²</button>
        <div id="step3-result" style="margin-top: 20px;"></div>
    </div>

    <!-- æ­¥éª¤4-6é¢„ç•™ -->
    <div class="card">
        <p style="color: #7f8c8d;">æ­¥éª¤4-6åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...</p>
    </div>
</div>

<style>
.step {
    padding: 10px 20px;
    border-radius: 4px;
    background: white;
    color: #95a5a6;
}
.step.active {
    background: #3498db;
    color: white;
    font-weight: bold;
}
</style>
{% endblock %}
