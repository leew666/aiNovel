{% extends "base.html" %}

{% block title %}é¦–é¡µ - AIå°è¯´åˆ›ä½œç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ“š æˆ‘çš„å°è¯´é¡¹ç›®</h2>

    <div style="margin-bottom: 20px;">
        <button class="btn btn-success" onclick="showCreateForm()">+ åˆ›å»ºæ–°é¡¹ç›®</button>
    </div>

    <!-- åˆ›å»ºé¡¹ç›®è¡¨å•ï¼ˆé»˜è®¤éšè—ï¼‰ -->
    <div id="create-form" style="display: none; margin-bottom: 30px; padding: 20px; background: #ecf0f1; border-radius: 4px;">
        <h3>åˆ›å»ºæ–°é¡¹ç›®</h3>
        <form hx-post="/novels/" hx-target="#novels-list" hx-swap="beforeend">
            <input type="text" name="title" placeholder="å°è¯´æ ‡é¢˜" required>
            <textarea name="description" placeholder="ç®€ä»‹æˆ–åˆå§‹æƒ³æ³•"></textarea>
            <input type="text" name="author" placeholder="ä½œè€…ï¼ˆé»˜è®¤ï¼šAIï¼‰" value="AI">
            <input type="text" name="genre" placeholder="ç±»å‹ï¼ˆå¦‚ï¼šç„å¹»ã€éƒ½å¸‚ï¼‰">

            <button type="submit" class="btn btn-success">åˆ›å»º</button>
            <button type="button" class="btn" onclick="hideCreateForm()">å–æ¶ˆ</button>
        </form>
    </div>

    <!-- å°è¯´åˆ—è¡¨ -->
    <div id="novels-list"
         hx-get="/novels/"
         hx-trigger="load"
         hx-indicator=".loading">
        <div class="loading">
            <div class="spinner"></div>
            <p>åŠ è½½ä¸­...</p>
        </div>
    </div>
</div>

<script>
function showCreateForm() {
    document.getElementById('create-form').style.display = 'block';
}

function hideCreateForm() {
    document.getElementById('create-form').style.display = 'none';
}
</script>
{% endblock %}
